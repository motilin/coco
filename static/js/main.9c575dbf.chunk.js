(this.webpackJsonpcoco=this.webpackJsonpcoco||[]).push([[0],{317:function(e,t,n){},319:function(e,t,n){},325:function(e,t){},326:function(e,t){},334:function(e,t){},351:function(e,t,n){"use strict";n.r(t);var c=n(34),r=n.n(c),a=n(270),i=n.n(a),u=(n(317),n(8)),s=n.n(u),o=n(13),j=n(5),l=(n(319),n(36));function d(e){var t=e.img,n=e.setIsReady,r=Object(c.useState)(null),a=Object(j.a)(r,2),i=a[0],u=a[1],s=Object(c.useState)(null),o=Object(j.a)(s,2),d=o[0],b=o[1],f=Object(c.useRef)(null);return Object(l.jsxs)("div",{className:"image",children:[Object(l.jsx)("input",{className:"imageInput",type:"file",name:"file",onChange:function(e){f.current=!1,n(!1),function(e){var n=e.target.files[0];if(n&&"image"===n.type.substr(0,5)){var c=new FileReader;c.onload=function(e){t.current.src=c.result,t.current.alt=n.name},c.readAsDataURL(n)}}(e)}}),Object(l.jsx)("img",{ref:t,alt:"",onLoad:function(e){var c=.9*window.innerWidth,r=.9*window.innerHeight,a=t.current.width,i=t.current.height/a;i>r/c?(b(r),u(r/i)):(u(c),b(c*i)),f.current=!0,n(!0)},style:{width:i,height:d},crossOrigin:"anonymous"})]})}function b(e){var t=e.video,n=e.setIsReady,r=Object(c.useRef)(null);function a(){return a=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=5;break}return e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});case 3:r.current=e.sent,"srcObject"in t?t.srcObject=r.current:t.src=window.URL.createObjectURL(r.current);case 5:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return Object(c.useEffect)((function(){return function(e){a.apply(this,arguments)}(t.current),function(){return r.current.getTracks()[0].stop()}}),[]),Object(l.jsx)("video",{ref:t,onLoadedData:function(){n(!0)},autoPlay:!0})}n(349);function f(e){var t=e.prediction;return Object(l.jsx)("pre",{children:t})}n.p;n(348),n(347);var O=n(337),h=Object(c.createContext)();function v(e){var t=e.children,n=Object(c.useState)(null),r=Object(j.a)(n,2),a=r[0],i=r[1],u=Object(c.useState)(null),d=Object(j.a)(u,2),b=d[0],f=(d[1],function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.load();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(c.useEffect)((function(){f()}),[]),a?Object(l.jsx)(h.Provider,{value:{model:a,cocoLabels:b},children:t}):Object(l.jsx)("h2",{className:"loadingModel",children:"Loading model ..."})}var p=!1;function g(){document.title="coco";var e=Object(c.useRef)(),t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null),a=Object(c.useState)(!1),i=Object(j.a)(a,2),u=i[0],O=i[1],v=Object(c.useState)(!1),g=Object(j.a)(v,2),m=g[0],x=g[1],w=Object(c.useState)(),y=Object(j.a)(w,2),R=y[0],k=y[1],C=Object(c.useContext)(h).model,L=Object(c.useCallback)(Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.detect(r.current);case 2:t=e.sent,k(t),p&&window.requestAnimationFrame((function(){return L()}));case 5:case"end":return e.stop()}}),e)}))),[]),S=Object(c.useCallback)((function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"checkbox",name:"toggle",ref:e,checked:u,onChange:function(){p=!p,x(!1),O(!u)}}),Object(l.jsx)("label",{htmlFor:e,children:"video"})]})}),[u]);return Object(c.useEffect)((function(){m&&(r.current=u?n.current:t.current,L())}),[u,m]),Object(l.jsxs)("div",{children:[Object(l.jsx)(S,{}),u?Object(l.jsx)(b,{video:n,setIsReady:x}):Object(l.jsx)(d,{img:t,setIsReady:x}),Object(l.jsx)(f,{prediction:R})]})}var m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(v,{children:Object(l.jsx)(g,{})})}),document.getElementById("root")),m()}},[[351,1,2]]]);
//# sourceMappingURL=main.9c575dbf.chunk.js.map